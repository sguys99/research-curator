# Day 8 Checkpoint 1: Streamlit ê¸°ë³¸ êµ¬ì¡° & ì¸ì¦ ì‹œìŠ¤í…œ

## ğŸ“‹ ì²´í¬í¬ì¸íŠ¸ ê°œìš”

**ëª©í‘œ**: Streamlit ì•± ì´ˆê¸° ì„¤ì •, ë§¤ì§ ë§í¬ ì¸ì¦, ì„¸ì…˜ ê´€ë¦¬ êµ¬í˜„

**êµ¬í˜„ ì‹œê°„**: ~2.5ì‹œê°„
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ğŸ¯ êµ¬í˜„ í•­ëª©

### 1. Streamlit í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/app/frontend/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ main.py                    # Streamlit ì•± ì§„ì…ì 
â”œâ”€â”€ pages/                     # ê° í˜ì´ì§€ ëª¨ë“ˆ (Checkpoint 2-4ì—ì„œ êµ¬í˜„)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py                # ì¸ì¦ ì»´í¬ë„ŒíŠ¸ âœ…
â”‚   â””â”€â”€ sidebar.py             # ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸ âœ…
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ api_client.py          # FastAPI í´ë¼ì´ì–¸íŠ¸ âœ…
    â””â”€â”€ session.py             # ì„¸ì…˜ ê´€ë¦¬ âœ…

.streamlit/
â”œâ”€â”€ config.toml                # Streamlit ì„¤ì • âœ…
â””â”€â”€ secrets.toml               # ì‹œí¬ë¦¿ (gitignore) âœ…
```

---

## ğŸ“¦ ì„¤ì¹˜ëœ ì˜ì¡´ì„±

```toml
[dependencies]
streamlit = "^1.41.1"
httpx = "^0.28.1"
```

**ì„¤ì¹˜ ëª…ë ¹:**
```bash
uv add streamlit httpx
```

---

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### 1. ì„¸ì…˜ ê´€ë¦¬ ìœ í‹¸ë¦¬í‹° (`utils/session.py`)

**15ê°œ í•¨ìˆ˜ êµ¬í˜„:**

**ì´ˆê¸°í™”:**
- `init_session_state()` - ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”

**ì‚¬ìš©ì ì„¸ì…˜:**
- `set_user_session()` - ë¡œê·¸ì¸ í›„ ì„¸ì…˜ ì„¤ì •
- `clear_session()` - ë¡œê·¸ì•„ì›ƒ ì‹œ ì„¸ì…˜ í´ë¦¬ì–´
- `is_authenticated()` - ì¸ì¦ ìƒíƒœ í™•ì¸
- `get_user_id()` - ì‚¬ìš©ì ID ì¡°íšŒ
- `get_user_email()` - ì‚¬ìš©ì ì´ë©”ì¼ ì¡°íšŒ
- `get_user_name()` - ì‚¬ìš©ì ì´ë¦„ ì¡°íšŒ
- `get_access_token()` - ì•¡ì„¸ìŠ¤ í† í° ì¡°íšŒ

**ì‚¬ìš©ì ì„¤ì •:**
- `set_preferences()` - ì‚¬ìš©ì ì„¤ì • ì €ì¥
- `get_preferences()` - ì‚¬ìš©ì ì„¤ì • ì¡°íšŒ

**í† í° ê´€ë¦¬:**
- `is_token_valid()` - í† í° ìœ íš¨ì„± ê²€ì¦

**ì˜¨ë³´ë”©:**
- `mark_onboarding_completed()` - ì˜¨ë³´ë”© ì™„ë£Œ í‘œì‹œ
- `is_onboarding_completed()` - ì˜¨ë³´ë”© ì™„ë£Œ ì—¬ë¶€ í™•ì¸

**í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜:**
- `set_current_page()` - í˜„ì¬ í˜ì´ì§€ ì„¤ì •
- `get_current_page()` - í˜„ì¬ í˜ì´ì§€ ì¡°íšŒ

---

### 2. FastAPI í´ë¼ì´ì–¸íŠ¸ ë˜í¼ (`utils/api_client.py`)

**ì£¼ìš” ê¸°ëŠ¥:**
- `httpx.Client`ë¥¼ ì‚¬ìš©í•œ HTTP ìš”ì²­
- ìë™ í† í° í—¤ë” ì¶”ê°€
- ì—ëŸ¬ ì²˜ë¦¬ ë° ì‘ë‹µ íŒŒì‹±
- `@st.cache_resource`ë¡œ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤

**API ë©”ì„œë“œ (15ê°œ):**

**ì¸ì¦ (2):**
- `request_magic_link(email)` - ë§¤ì§ ë§í¬ ìš”ì²­
- `verify_magic_link(token)` - ë§¤ì§ ë§í¬ ê²€ì¦

**ì‚¬ìš©ì ê´€ë¦¬ (3):**
- `get_current_user()` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´
- `get_user_preferences(user_id)` - ì‚¬ìš©ì ì„¤ì • ì¡°íšŒ
- `update_user_preferences(user_id, preferences)` - ì‚¬ìš©ì ì„¤ì • ì—…ë°ì´íŠ¸

**ì•„í‹°í´ (2):**
- `get_articles(...)` - ì•„í‹°í´ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§)
- `get_article(article_id)` - ë‹¨ì¼ ì•„í‹°í´ ì¡°íšŒ

**ì‹œë§¨í‹± ê²€ìƒ‰ (2):**
- `search_articles(query, ...)` - ìì—°ì–´ ê²€ìƒ‰
- `find_similar_articles(article_id, ...)` - ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰

**ë‹¤ì´ì œìŠ¤íŠ¸ (3):**
- `get_user_digests(user_id, ...)` - ë‹¤ì´ì œìŠ¤íŠ¸ ì´ë ¥
- `get_latest_digest(user_id)` - ìµœì‹  ë‹¤ì´ì œìŠ¤íŠ¸
- `send_test_digest(user_id)` - í…ŒìŠ¤íŠ¸ ì´ë©”ì¼ ë°œì†¡

**í”¼ë“œë°± (2):**
- `submit_feedback(...)` - í”¼ë“œë°± ì œì¶œ
- `get_user_feedback(user_id, ...)` - í”¼ë“œë°± ì´ë ¥

**LLM (1):**
- `chat_completion(messages, provider)` - ì±—ë´‡ìš© LLM í˜¸ì¶œ

---

### 3. ì¸ì¦ ì»´í¬ë„ŒíŠ¸ (`components/auth.py`)

**í•¨ìˆ˜ (5ê°œ):**

1. **`show_login_page()`**
   - ë¡œê·¸ì¸ UI í‘œì‹œ
   - ì´ë©”ì¼ ì…ë ¥ â†’ ë§¤ì§ ë§í¬ ë°œì†¡
   - ê°œë°œìš© í† í° ì§ì ‘ ì…ë ¥ ì§€ì›

2. **`handle_magic_link_callback()`**
   - URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ í† í° ì¶”ì¶œ
   - í† í° ê²€ì¦ í›„ ì„¸ì…˜ ì„¤ì •
   - ìë™ ë¡œê·¸ì¸ ì²˜ë¦¬

3. **`show_logout_button()`**
   - ì‚¬ì´ë“œë°”ì— ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í‘œì‹œ

4. **`show_user_info()`**
   - ì‚¬ì´ë“œë°”ì— ì‚¬ìš©ì ì •ë³´ í‘œì‹œ

5. **`require_auth(func)`**
   - ë°ì½”ë ˆì´í„°: ë¡œê·¸ì¸ í•„ìˆ˜ í˜ì´ì§€

**ê¸°ëŠ¥:**
- ë§¤ì§ ë§í¬ ì¸ì¦ í”Œë¡œìš°
- í† í° ê¸°ë°˜ ë¡œê·¸ì¸ (ê°œë°œìš©)
- ì„¸ì…˜ ìë™ ê´€ë¦¬
- ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€

---

### 4. ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸ (`components/sidebar.py`)

**í•¨ìˆ˜ (3ê°œ):**

1. **`show_sidebar()`**
   - ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´
   - ì˜¨ë³´ë”© ë¯¸ì™„ë£Œ ì‹œ: ì˜¨ë³´ë”© í˜ì´ì§€ë§Œ í‘œì‹œ
   - ì˜¨ë³´ë”© ì™„ë£Œ ì‹œ: ëŒ€ì‹œë³´ë“œ, ê²€ìƒ‰, ì„¤ì •, í”¼ë“œë°± í‘œì‹œ
   - ë„ì›€ë§ ì„¹ì…˜
   - ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼

2. **`show_page_header(title, description)`**
   - í˜ì´ì§€ ìƒë‹¨ í—¤ë” í‘œì‹œ

3. **`show_stats_cards(stats)`**
   - í†µê³„ ì¹´ë“œë¥¼ ì»¬ëŸ¼ìœ¼ë¡œ í‘œì‹œ

**ê¸°ëŠ¥:**
- ë™ì  ë©”ë‰´ (ì˜¨ë³´ë”© ìƒíƒœ ê¸°ë°˜)
- ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜

---

### 5. ë©”ì¸ ì•± (`main.py`)

**ì£¼ìš” êµ¬ì„±:**

```python
st.set_page_config(
    page_title="Research Curator",
    page_icon="ğŸ”¬",
    layout="wide",
    initial_sidebar_state="expanded",
)

def main():
    init_session_state()
    handle_magic_link_callback()

    if not is_authenticated():
        show_login_page()
        return

    selected_page = show_sidebar()

    if selected_page:
        _navigate_to_page(selected_page)
    else:
        # Default page
        if not is_onboarding_completed():
            _show_onboarding_page()
        else:
            _show_dashboard_page()
```

**í˜ì´ì§€ ë¼ìš°íŒ…:**
- `/` - ë¡œê·¸ì¸ ë˜ëŠ” ëŒ€ì‹œë³´ë“œ
- `onboarding` - ì˜¨ë³´ë”© (Checkpoint 2)
- `dashboard` - ëŒ€ì‹œë³´ë“œ (Checkpoint 3)
- `search` - ê²€ìƒ‰ (Checkpoint 3)
- `settings` - ì„¤ì • (Checkpoint 3)
- `feedback` - í”¼ë“œë°± (Checkpoint 4)

**í˜„ì¬ ìƒíƒœ:**
- ëª¨ë“  í˜ì´ì§€ëŠ” í”Œë ˆì´ìŠ¤í™€ë” êµ¬í˜„
- ì‹¤ì œ ê¸°ëŠ¥ì€ Checkpoint 2-4ì—ì„œ êµ¬í˜„ ì˜ˆì •

---

### 6. Streamlit ì„¤ì •

**`.streamlit/config.toml`**
```toml
[theme]
primaryColor = "#4F46E5"
backgroundColor = "#FFFFFF"
secondaryBackgroundColor = "#F3F4F6"
textColor = "#1F2937"
font = "sans serif"

[server]
port = 8501
enableCORS = false
enableXsrfProtection = true
maxUploadSize = 200

[browser]
gatherUsageStats = false
```

**`.streamlit/secrets.toml`** (gitignored)
```toml
environment = "development"
api_base_url = "http://localhost:8000"
```

---

## âœ… í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

### í…ŒìŠ¤íŠ¸ ë…¸íŠ¸ë¶

**`notebooks/08.test_day8_checkpoint1.ipynb`**

**í…ŒìŠ¤íŠ¸ í•­ëª©:**
1. âœ… ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸ (8ê°œ íŒŒì¼)
2. âœ… ì„¸ì…˜ ê´€ë¦¬ í•¨ìˆ˜ í™•ì¸ (15ê°œ)
3. âœ… API í´ë¼ì´ì–¸íŠ¸ ë©”ì„œë“œ í™•ì¸ (15ê°œ)
4. âœ… ì¸ì¦ ì»´í¬ë„ŒíŠ¸ í™•ì¸ (5ê°œ)
5. âœ… ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸ í™•ì¸ (3ê°œ)
6. âœ… ë©”ì¸ ì•± êµ¬ì¡° í™•ì¸
7. âœ… Streamlit ì„¤ì • íŒŒì¼ í™•ì¸

**ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼!**

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. FastAPI ë°±ì—”ë“œ ì‹œì‘

```bash
# í„°ë¯¸ë„ 1
uvicorn src.app.api.main:app --reload
```

### 2. Streamlit í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘

```bash
# í„°ë¯¸ë„ 2
streamlit run src/app/frontend/main.py
```

### 3. ë¸Œë¼ìš°ì € ì ‘ì†

```
http://localhost:8501
```

---

## ğŸ“¸ ì˜ˆìƒ UI í”Œë¡œìš°

### 1. ë¡œê·¸ì¸ í˜ì´ì§€
- ì´ë©”ì¼ ì…ë ¥
- "ë§¤ì§ ë§í¬ ë°œì†¡" ë²„íŠ¼
- (ê°œë°œìš©) í† í° ì§ì ‘ ì…ë ¥

### 2. ë¡œê·¸ì¸ í›„
- ì‚¬ì´ë“œë°”: ì‚¬ìš©ì ì •ë³´ + ë©”ë‰´
- ì˜¨ë³´ë”© ë¯¸ì™„ë£Œ ì‹œ â†’ ì˜¨ë³´ë”© í˜ì´ì§€
- ì˜¨ë³´ë”© ì™„ë£Œ ì‹œ â†’ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€

### 3. ë„¤ë¹„ê²Œì´ì…˜
- ì‚¬ì´ë“œë°” ë²„íŠ¼ìœ¼ë¡œ í˜ì´ì§€ ì „í™˜
- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼

---

## ğŸ¯ ì£¼ìš” ì„±ê³¼

1. **ì™„ì „í•œ Streamlit í”„ë¡œì íŠ¸ êµ¬ì¡° âœ…**
   - ëª¨ë“ˆí™”ëœ ì»´í¬ë„ŒíŠ¸
   - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹°
   - í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜

2. **ì„¸ì…˜ ê´€ë¦¬ ì‹œìŠ¤í…œ âœ…**
   - 15ê°œ í•¨ìˆ˜ë¡œ ì™„ì „í•œ ì„¸ì…˜ ê´€ë¦¬
   - ì¸ì¦ ìƒíƒœ, ì‚¬ìš©ì ì •ë³´, ì„¤ì •, ì˜¨ë³´ë”© ìƒíƒœ ì¶”ì 
   - Streamlit `session_state` í™œìš©

3. **FastAPI í†µí•© âœ…**
   - 15ê°œ API ë©”ì„œë“œ ë˜í•‘
   - ìë™ í† í° ê´€ë¦¬
   - ì—ëŸ¬ ì²˜ë¦¬

4. **ì¸ì¦ ì‹œìŠ¤í…œ âœ…**
   - ë§¤ì§ ë§í¬ í”Œë¡œìš°
   - í† í° ê¸°ë°˜ ë¡œê·¸ì¸
   - ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥

5. **ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ âœ…**
   - ë™ì  ë©”ë‰´
   - ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
   - ë„ì›€ë§

---

## ğŸ› í•´ê²°ëœ ì´ìŠˆ

### Issue 1: streamlit-extras ì„¤ì¹˜ íƒ€ì„ì•„ì›ƒ
**ë¬¸ì œ**: plotly ë‹¤ìš´ë¡œë“œ ì‹œ ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ (30ì´ˆ)
**í•´ê²°**:
- streamlitë§Œ ì„¤ì¹˜ (streamlit-extrasëŠ” ì„ íƒ ì‚¬í•­)
- í•„ìš” ì‹œ `UV_HTTP_TIMEOUT=120`ìœ¼ë¡œ ì¬ì‹œë„

### Issue 2: httpx ëˆ„ë½
**ë¬¸ì œ**: API í´ë¼ì´ì–¸íŠ¸ì—ì„œ httpx í•„ìš”
**í•´ê²°**: `uv add httpx` ì¶”ê°€ ì„¤ì¹˜

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„ (Checkpoint 2)

**ëª©í‘œ**: AI ì±—ë´‡ ì˜¨ë³´ë”© í˜ì´ì§€ êµ¬í˜„

**êµ¬í˜„ í•­ëª©:**
1. `pages/0_onboarding.py` - ì˜¨ë³´ë”© í˜ì´ì§€
2. `components/chatbot.py` - ì±—ë´‡ ì»´í¬ë„ŒíŠ¸
3. LLM í†µí•© (prompts.yamlì˜ onboarding í”„ë¡¬í”„íŠ¸)
4. ëŒ€í™”í˜• UI (st.chat_message)
5. ì •ë³´ ìˆ˜ì§‘ ë° UserPreference ì €ì¥

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3-4ì‹œê°„

---

## ğŸ“Š ì²´í¬í¬ì¸íŠ¸ ìš”ì•½

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| í”„ë¡œì íŠ¸ êµ¬ì¡° | âœ… | 8ê°œ íŒŒì¼ ìƒì„± |
| ì„¸ì…˜ ê´€ë¦¬ | âœ… | 15ê°œ í•¨ìˆ˜ |
| API í´ë¼ì´ì–¸íŠ¸ | âœ… | 15ê°œ ë©”ì„œë“œ |
| ì¸ì¦ ì»´í¬ë„ŒíŠ¸ | âœ… | 5ê°œ í•¨ìˆ˜ |
| ì‚¬ì´ë“œë°” | âœ… | 3ê°œ í•¨ìˆ˜ |
| ë©”ì¸ ì•± | âœ… | ë¼ìš°íŒ… êµ¬í˜„ |
| Streamlit ì„¤ì • | âœ… | config.toml, secrets.toml |
| í…ŒìŠ¤íŠ¸ ë…¸íŠ¸ë¶ | âœ… | ê²€ì¦ ì™„ë£Œ |

**ì „ì²´ ì§„í–‰ë¥ **: âœ… 100% (Checkpoint 1 ì™„ë£Œ)

---

**ì‘ì„±ì¼**: 2025-12-04
**ì‘ì„±ì**: Claude Code
**ìƒíƒœ**: âœ… ê²€ì¦ ì™„ë£Œ
